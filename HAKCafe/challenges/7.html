<!DOCTYPE html>
<html>
<head>
  <title>Challenge 7</title>
</head>
<body style="background:#222; color:white; font-family:monospace; padding:20px;">
  <h2>Challenge 7: The BeanShare Recon</h2>
  <p>You’ve discovered a suspicious Windows system on a mock internal network. It looks like it’s running SMB. </p>

  <p>Use the following SMB connection tool to view shares and determine the suspicious host.</p>

<h3>SMB Share Scanner</h3>
<button onclick="startScan()">Start Scan</button>

<div id="scannerModal" style="display:none; background:#111; padding:20px; margin-top:20px; border:1px solid #fff;">
  <p>Scanning target system <code>192.168.1.15</code>...</p>
  <ul id="shareList" style="list-style-type:none; padding:0;"></ul>
  <p><strong>What is the name of an accessible share?</strong></p>
  <input type="text" id="answer" placeholder="Share name">
  <button onclick="check()">Submit</button>
  <p id="result"></p>
</div>

<script>
  function startScan() {
    const modal = document.getElementById("scannerModal");
    const list = document.getElementById("shareList");
    modal.style.display = "block";
    list.innerHTML = "";

    const shares = ["public", "coffee_docs", "admin$", "IPC$"];
    let i = 0;
    const interval = setInterval(() => {
      const li = document.createElement("li");
      li.textContent = `Discovered share: ${shares[i]}`;
      list.appendChild(li);
      i++;
      if (i >= shares.length) clearInterval(interval);
    }, 800);
  }

  function check() {
    const val = document.getElementById('answer').value.trim().toLowerCase();
    const accepted = ['public', 'coffee_docs'];

    if (accepted.includes(val)) {
      localStorage.setItem('solved-7', true);
      document.getElementById('result').textContent = "Correct! You’ve successfully enumerated the SMB shares!";
      window.parent.postMessage({type: 'challengeSolved', id:7}, '*');
    } else {
      document.getElementById('result').textContent = "Try scanning again.";
    }
  }
</script>
</body>
</html>
